<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>vid</title>
<style>

   html {
   box-sizing: border-box;
   font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica,
      Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
   font-size: 16px;
   background: #F1F8E9;
}

*,
*:before,
*:after {
   box-sizing: inherit;
}

.container {
   display: flex;
   flex-direction: column;
   justify-content: center;
   align-items: center;
   width: 100%;
   margin: 3rem auto;
}

.slider {
   width: 350px;
   height: 500px;
   margin: 0 auto;
   background: black;
   overflow: hidden;
}

.slider__wrapper {
   height: 500px;
   transition: transform 0.3s;
}

.slide {
   position: relative;
   float: left;
   width: 350px;
   height: 500px;
   -webkit-user-select: none;
   -moz-user-select: none;
   -ms-user-select: none;
   -o-user-select: none;
   pointer-events: none;

   &::before {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 40%;
      background: linear-gradient(transparent, black);
   }
}

.slide__img {
   width: 100%;
   height: 500px;
   object-fit: cover;
}

.slide__text {
   position: absolute;
   color: white;
   bottom: 0.625rem;
   left: 0;
   padding: 1.25rem;
}

.swipe {
   margin-top: 2.5rem;
}

.swipe__img {
   transform: translatex(10px);
   animation: moving-finger 0.8s ease-in-out 4 alternate;
}

@keyframes moving-finger {
   from {
      transform: translatex(10px);
   }
   to {
      transform: translatex(0);
   }
}



</style>
</head>
<body>
<div class="container">
   <div class="slider">
      <div class="slider__wrapper">
         <div class="slide">
            <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/829617/slide_touch_1.jpg" alt="" class="slide__img">
            <p class="slide__text">8 Avenue du Mahatma Gandhi Paris</p>
         </div>
         <div class="slide">
            <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/829617/slide_touch_2.jpg" alt="" class="slide__img">
            <p class="slide__text">Wilderness photographer</p>
         </div>
         <div class="slide">
            <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/829617/slide_touch_3.jpg" alt="" class="slide__img">
            <p class="slide__text">Little Governors Camp, Kenya</p>
         </div>
         <div class="slide">
            <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/829617/slide_touch_4.jpg" alt="" class="slide__img">
            <p class="slide__text">Purwokerto, Indonesia</p>
         </div>
         <div class="slide">
            <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/829617/slide_touch_5.jpg" alt="" class="slide__img">
            <p class="slide__text">Coffee break</p>
         </div>
      </div>
   </div>
   <div class="swipe">
      <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/829617/finger-swipe.png" alt="" class="swipe__img">
   </div>
</div>
<script>
       
const container = document.querySelector('.slider');
const container_width = container.clientWidth;
const imgs_wrapper = document.querySelector('.slider__wrapper');
const imgs = document.querySelectorAll('.slide');
const total_imgs = imgs.length;
let current_index = 0;
let pointer_is_down = false;
let [start_x, end_x] = [0, 0];
let move_distance = 0;

function init() {
   imgs_wrapper.style.width = `${container_width * total_imgs}px`;
}

// Mousemove and Touchmove Event
function createDraggingEffects() {
   const max_distance = 2;
   const scrolled_distance = (current_index * container_width) + (start_x - end_x) / max_distance;

   switchImages(-scrolled_distance);
}

// Mouseup and Touchend Event
function calculateFinalMoveDistance() {
   const scrolled_distance = Math.abs(start_x - end_x);
   const minimum_distance = 30;

   if (scrolled_distance < minimum_distance) {
      move_distance = -(current_index * container_width);
      switchImages();
      return false;
   }

   if (start_x > end_x & current_index < total_imgs - 1) { // scroll next
      current_index++;
   } else if (start_x < end_x && current_index > 0) { // scroll prev
      current_index--;
   }

   move_distance = -(current_index * container_width);
   switchImages(move_distance);
}

// Switch Images
function switchImages(scrolled_number) {
   const distance = scrolled_number || move_distance;

   imgs_wrapper.style.transform = `translateX(${distance}px)`;
}

// Mouseleave event
function handleMouseLeave(e) {
   if (!pointer_is_down) return false;

   pointer_is_down = false;
   [start_x, end_x] = [0, 0];
   switchImages();
}

init();

container.addEventListener('mousedown', (e) => {
   e.preventDefault();
   pointer_is_down = true;
   start_x = e.pageX;
});

container.addEventListener('mousemove', (e) => {
   e.preventDefault();
   if (!pointer_is_down) return false;
   end_x = e.pageX;
   createDraggingEffects();
});

container.addEventListener('mouseup', (e) => {
   e.preventDefault();
   pointer_is_down = false;
   calculateFinalMoveDistance();
});

container.addEventListener('mouseleave', handleMouseLeave);

container.addEventListener('touchstart', (e) => {
   pointer_is_down = true;
   start_x = e.touches[0].pageX;
});

container.addEventListener('touchmove', (e) => {
   if (!pointer_is_down) return false;
   end_x = e.touches[0].pageX;
   createDraggingEffects();
});

container.addEventListener('touchend', (e) => {
   pointer_is_down = false;
   calculateFinalMoveDistance();
});

</script>
</body>
</html>
